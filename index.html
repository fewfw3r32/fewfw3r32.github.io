

<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8" />
      <title>
      hyna</title>
      <script>
window.onload = function() {
         function genField(y, x) {
             var SIZE = '10px';
             var fieldHtml = document.createElement('table');
             fieldHtml.cellSpacing = '1px';
             fieldHtml.cellPadding = '0px';
             fieldHtml.style.fontSize = '8px';
             var fieldArr = [];
             for (let i = 0; i < y; i++) {
                 let lineHtml = document.createElement('tr');
                 fieldHtml.appendChild(lineHtml);
                 let line = [];
                 for (let j = 0; j < x; j++) {
                     let cellHtml = document.createElement('td');
                     cellHtml.width = SIZE;
                     cellHtml.height = SIZE;
                     cellHtml.style.backgroundColor = 'lightgray';
                     cellHtml.align = 'center';
                     let cell = {
                         e: cellHtml,
                         activated: false
                     };
                     lineHtml.appendChild(cell.e);
                     line.push(cell);
                 };
                 fieldArr.push(line);
             };
             fieldHtml.firstChild.firstChild.innerText = '●';
             document.body.appendChild(fieldHtml);
             return fieldArr;
         };
         
         function move() {
         
             if (field[point.pos.y][point.pos.x].activated) {
                 if (dir == 3) {
                     dir = 0;
                 } else {
                     dir++;
                 };
             } else {
                 if (dir === 0) {
                    dir = 3;
                } else {
                    dir--;
                };
             };
         
             switch (dir) {
                 case 0:
                     point.up();
                     break;
                 case 1:
                     point.right();
                     break;
                 case 2:
                     point.down();
                     break;
                 case 3:
                     point.left();
                     break;
             };
         
         };
         
         var field = genField(50, 50);
         
         var point = {
             pos: {
                 x: 0,
                 y: 0
             },
             left: function() {
                 field[this.pos.y][this.pos.x].e.innerText = '';
                 if (field[this.pos.y][this.pos.x].activated) {
                     field[this.pos.y][this.pos.x].e.style.backgroundColor = 'lightgray';
                     field[this.pos.y][this.pos.x].activated = !field[this.pos.y][this.pos.x].activated;
                 } else {
                     field[this.pos.y][this.pos.x].e.style.backgroundColor = 'red';
                     field[this.pos.y][this.pos.x].activated = !field[this.pos.y][this.pos.x].activated;
                 };
                 if (this.pos.x === 0) {
                     this.pos.x = field[this.pos.y].length - 1;
                 } else {
                     this.pos.x--;
                 };
                 field[this.pos.y][this.pos.x].e.innerText = '●';
             },
             right: function() {
                 field[this.pos.y][this.pos.x].e.innerText = '';
                 if (field[this.pos.y][this.pos.x].activated) {
                     field[this.pos.y][this.pos.x].e.style.backgroundColor = 'lightgray';
                     field[this.pos.y][this.pos.x].activated = !field[this.pos.y][this.pos.x].activated;
                 } else {
                     field[this.pos.y][this.pos.x].e.style.backgroundColor = 'red';
                     field[this.pos.y][this.pos.x].activated = !field[this.pos.y][this.pos.x].activated;
                 };
                 if (this.pos.x === field[this.pos.y].length - 1) {
                     this.pos.x = 0;
                 } else {
                     this.pos.x++;
                 };
                 field[this.pos.y][this.pos.x].e.innerText = '●';
             },
             up: function() {
                 field[this.pos.y][this.pos.x].e.innerText = '';
                 if (field[this.pos.y][this.pos.x].activated) {
                     field[this.pos.y][this.pos.x].e.style.backgroundColor = 'lightgray';
                     field[this.pos.y][this.pos.x].activated = !field[this.pos.y][this.pos.x].activated;
                 } else {
                     field[this.pos.y][this.pos.x].e.style.backgroundColor = 'red';
                     field[this.pos.y][this.pos.x].activated = !field[this.pos.y][this.pos.x].activated;
                 };
                 if (this.pos.y === 0) {
                     this.pos.y = field.length - 1;
                 } else {
                     this.pos.y--;
                 };
                 field[this.pos.y][this.pos.x].e.innerText = '●';
             },
             down: function() {
                 field[this.pos.y][this.pos.x].e.innerText = '';
                 if (field[this.pos.y][this.pos.x].activated) {
                     field[this.pos.y][this.pos.x].e.style.backgroundColor = 'lightgray';
                     field[this.pos.y][this.pos.x].activated = !field[this.pos.y][this.pos.x].activated;
                 } else {
                     field[this.pos.y][this.pos.x].e.style.backgroundColor = 'red';
                     field[this.pos.y][this.pos.x].activated = !field[this.pos.y][this.pos.x].activated;
                 };
                 if (this.pos.y === field.length - 1) {
                     this.pos.y = 0;
                 } else {
                     this.pos.y++;
                 };
                 field[this.pos.y][this.pos.x].e.innerText = '●';
             },
         };
         
         var dir = 0;
        /* for (let i = 0; i<field.length; i++) {
             for (let j= 0; j<field[i].length; j++) {
                if (~~(Math.random()*2)) {
                  field[i][j].e.style.backgroundColor = 'red';
                  field[i][j].activated = true;
                };
             };
         }; */
         
         var int = setInterval(move);
};
      </script>
   </head>
   <body>
   </body>
</html>
